# EmbarkX - AI-Powered Fitness Tracking Platform

## Complete System Architecture Documentation

---

## ğŸ“ Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              PRESENTATION LAYER                              â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    React Frontend (Port: 5173)                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚  Components  â”‚  â”‚    Pages     â”‚  â”‚   Services   â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  - Header    â”‚  â”‚  - Activity  â”‚  â”‚  - API Layer â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  - Forms     â”‚  â”‚  - Detail    â”‚  â”‚  - Auth      â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  - Lists     â”‚  â”‚  - Login     â”‚  â”‚  - Axios     â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  State Management: Redux Toolkit                                    â”‚   â”‚
â”‚  â”‚  UI Framework: Material-UI + Custom Glassmorphism                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ HTTPS/WSS
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SECURITY & AUTH LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Keycloak OAuth2 Server (Port: 8181)                    â”‚   â”‚
â”‚  â”‚  - PKCE Flow Implementation                                         â”‚   â”‚
â”‚  â”‚  - JWT Token Generation & Validation                               â”‚   â”‚
â”‚  â”‚  - User Session Management                                          â”‚   â”‚
â”‚  â”‚  - Realm: fitness-oAuth2                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ JWT Tokens
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API GATEWAY & ROUTING LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Spring Cloud Gateway (Port: 8080)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚  â”‚  â”‚   Routing  â”‚  â”‚Load Balanceâ”‚  â”‚   Filters  â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚   /users/* â”‚  â”‚  Round     â”‚  â”‚  - Auth    â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚/activities*â”‚  â”‚  Robin     â”‚  â”‚  - CORS    â”‚                   â”‚   â”‚
â”‚  â”‚  â”‚   /ai/*    â”‚  â”‚            â”‚  â”‚  - Logging â”‚                   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
                    â†“                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVICE DISCOVERY LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Netflix Eureka Server (Port: 8761)                     â”‚   â”‚
â”‚  â”‚  - Service Registration                                             â”‚   â”‚
â”‚  â”‚  - Health Monitoring                                                â”‚   â”‚
â”‚  â”‚  - Dynamic Service Discovery                                        â”‚   â”‚
â”‚  â”‚  - Heartbeat Management                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ Service Registry
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CONFIGURATION MANAGEMENT LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Spring Cloud Config Server (Port: 8888)                  â”‚   â”‚
â”‚  â”‚  - Centralized Configuration                                        â”‚   â”‚
â”‚  â”‚  - Environment-specific Properties                                  â”‚   â”‚
â”‚  â”‚  - Dynamic Config Refresh                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚                     â”‚
                â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MICROSERVICES LAYER                                â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  User Service     â”‚  â”‚ Activity Service  â”‚  â”‚   AI Service      â”‚      â”‚
â”‚  â”‚   (Port: 8081)    â”‚  â”‚   (Port: 8082)    â”‚  â”‚  (Port: 8083)     â”‚      â”‚
â”‚  â”‚                   â”‚  â”‚                   â”‚  â”‚                   â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚ Controllers   â”‚ â”‚  â”‚ â”‚ Controllers   â”‚ â”‚  â”‚ â”‚ Controllers   â”‚ â”‚      â”‚
â”‚  â”‚ â”‚  - REST API   â”‚ â”‚  â”‚ â”‚  - REST API   â”‚ â”‚  â”‚ â”‚  - REST API   â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚   Services    â”‚ â”‚  â”‚ â”‚   Services    â”‚ â”‚  â”‚ â”‚   Services    â”‚ â”‚      â”‚
â”‚  â”‚ â”‚  - Business   â”‚ â”‚  â”‚ â”‚  - Business   â”‚ â”‚  â”‚ â”‚  - AI Logic   â”‚ â”‚      â”‚
â”‚  â”‚ â”‚    Logic      â”‚ â”‚  â”‚ â”‚    Logic      â”‚ â”‚  â”‚ â”‚  - Gemini API â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚ Repositories  â”‚ â”‚  â”‚ â”‚ Repositories  â”‚ â”‚  â”‚ â”‚ Repositories  â”‚ â”‚      â”‚
â”‚  â”‚ â”‚  - Data       â”‚ â”‚  â”‚ â”‚  - Data       â”‚ â”‚  â”‚ â”‚  - Data       â”‚ â”‚      â”‚
â”‚  â”‚ â”‚    Access     â”‚ â”‚  â”‚ â”‚    Access     â”‚ â”‚  â”‚ â”‚    Access     â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚   Entities    â”‚ â”‚  â”‚ â”‚   Documents   â”‚ â”‚  â”‚ â”‚   Documents   â”‚ â”‚      â”‚
â”‚  â”‚ â”‚  - User       â”‚ â”‚  â”‚ â”‚  - Activity   â”‚ â”‚  â”‚ â”‚  - AIAnalysis â”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                      â”‚                       â”‚                  â”‚
â”‚           â”‚                      â”‚                       â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚                       â”‚
            â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                              â”‚
            â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MESSAGE QUEUE LAYER                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    RabbitMQ (Port: 5672)                            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚   Exchange   â”‚      â”‚    Queue     â”‚      â”‚   Consumer   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   fitness.   â”‚â”€â”€â”€â”€â”€â†’â”‚   activity   â”‚â”€â”€â”€â”€â”€â†’â”‚  AI Service  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚   exchange   â”‚      â”‚    .queue    â”‚      â”‚              â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Event Types:                                                       â”‚   â”‚
â”‚  â”‚  - ActivityCreatedEvent                                            â”‚   â”‚
â”‚  â”‚  - ActivityUpdatedEvent                                            â”‚   â”‚
â”‚  â”‚  - ActivityDeletedEvent                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                              â”‚
            â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA PERSISTENCE LAYER                              â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   PostgreSQL (Port: 5432) â”‚    â”‚      MongoDB (Port: 27017)         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ fitness_user_db     â”‚  â”‚    â”‚  â”‚  Activity Database           â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                     â”‚  â”‚    â”‚  â”‚  - activities collection     â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Tables:             â”‚  â”‚    â”‚  â”‚  - activity_sequences        â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - users            â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  â”‚  - roles            â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚  - user_roles       â”‚  â”‚    â”‚  â”‚  AI Database                 â”‚ â”‚   â”‚
â”‚  â”‚  â”‚  - profiles         â”‚  â”‚    â”‚  â”‚  - ai_recommendations        â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚  â”‚  - analysis_history          â”‚ â”‚   â”‚
â”‚  â”‚                            â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â”‚  Features:                â”‚    â”‚  Features:                        â”‚   â”‚
â”‚  â”‚  - ACID Transactions      â”‚    â”‚  - Flexible Schema                â”‚   â”‚
â”‚  â”‚  - Referential Integrity  â”‚    â”‚  - Horizontal Scaling             â”‚   â”‚
â”‚  â”‚  - Indexing               â”‚    â”‚  - Document Storage               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXTERNAL SERVICES LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Google Gemini API                                â”‚   â”‚
â”‚  â”‚  - AI-powered workout analysis                                      â”‚   â”‚
â”‚  â”‚  - Personalized recommendations                                     â”‚   â”‚
â”‚  â”‚  - Form correction suggestions                                      â”‚   â”‚
â”‚  â”‚  - Safety tips generation                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Detailed Component Architecture

### 1. **Frontend Architecture (React + Vite)**

```
fitness-app-frontend/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/                    # Static resources
â”‚   â”œâ”€â”€ background/                # Background components
â”‚   â”‚   â””â”€â”€ FitnessBackground.jsx  # Animated fitness icons
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                # Reusable components
â”‚   â”‚   â”œâ”€â”€ Header.jsx            # App navigation header
â”‚   â”‚   â”œâ”€â”€ WelcomeSection.jsx    # User greeting section
â”‚   â”‚   â”œâ”€â”€ ActivityForme.jsx     # Activity logging form
â”‚   â”‚   â”œâ”€â”€ ActivityList.jsx      # Activity grid display
â”‚   â”‚   â””â”€â”€ ActivityDetail.jsx    # Individual activity view
â”‚   â”‚
â”‚   â”œâ”€â”€ Page/                      # Page-level components
â”‚   â”‚   â””â”€â”€ ActivityPage.jsx      # Main activity dashboard
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                  # API service layer
â”‚   â”‚   â””â”€â”€ api.js                # Axios configuration
â”‚   â”‚
â”‚   â”œâ”€â”€ context/                   # Context providers
â”‚   â”‚   â””â”€â”€ AuthContext.jsx       # Authentication context
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                     # Redux store
â”‚   â”‚   â””â”€â”€ store.js              # State management
â”‚   â”‚
â”‚   â”œâ”€â”€ authConfig.js             # OAuth2 configuration
â”‚   â”œâ”€â”€ App.jsx                   # Root component
â”‚   â”œâ”€â”€ App.css                   # Global styles
â”‚   â””â”€â”€ main.jsx                  # Application entry
â”‚
â”œâ”€â”€ public/                        # Static public assets
â”œâ”€â”€ package.json                  # Dependencies
â””â”€â”€ vite.config.js               # Vite configuration
```

**Frontend Flow:**

```
User Action â†’ Component â†’ Redux Action â†’ API Service â†’
Backend API â†’ Response â†’ Redux State â†’ Component Re-render
```

---

### 2. **Microservices Architecture Details**

#### **A. Eureka Server (Service Discovery)**

```
euraka/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/com/fitness/eureka/
â”‚       â”‚   â””â”€â”€ EurekaApplication.java
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml
â”‚               - server.port: 8761
â”‚               - eureka.client.register-with-eureka: false
â”‚               - eureka.client.fetch-registry: false
```

**Responsibilities:**

- Service registration and health checks
- Service discovery for inter-service communication
- Load balancing information
- Failure detection and recovery

---

#### **B. Config Server (Configuration Management)**

```
configServer/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/com/fitness/configserver/
â”‚       â”‚   â””â”€â”€ ConfigServerApplication.java
â”‚       â””â”€â”€ resources/
â”‚           â”œâ”€â”€ application.yml
â”‚           â””â”€â”€ config/
â”‚               â”œâ”€â”€ user-service.yml
â”‚               â”œâ”€â”€ activity-service.yml
â”‚               â””â”€â”€ ai-service.yml
```

**Configuration Hierarchy:**

```
application.yml (default)
  â”œâ”€â”€ user-service-dev.yml
  â”œâ”€â”€ user-service-prod.yml
  â”œâ”€â”€ activity-service-dev.yml
  â””â”€â”€ ai-service-prod.yml
```

---

#### **C. API Gateway (Request Routing)**

```
gateway/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â”œâ”€â”€ java/com/fitness/gateway/
â”‚       â”‚   â”œâ”€â”€ GatewayApplication.java
â”‚       â”‚   â”œâ”€â”€ config/
â”‚       â”‚   â”‚   â”œâ”€â”€ GatewayConfig.java
â”‚       â”‚   â”‚   â””â”€â”€ SecurityConfig.java
â”‚       â”‚   â””â”€â”€ filter/
â”‚       â”‚       â”œâ”€â”€ AuthenticationFilter.java
â”‚       â”‚       â””â”€â”€ LoggingFilter.java
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application.yml
```

**Routing Rules:**

```yaml
routes:
  - id: user-service
    uri: lb://USER-SERVICE
    predicates:
      - Path=/users/**
    filters:
      - RewritePath=/users/(?<segment>.*), /${segment}
      - AddRequestHeader=X-Request-Source, Gateway

  - id: activity-service
    uri: lb://ACTIVITY-SERVICE
    predicates:
      - Path=/activities/**

  - id: ai-service
    uri: lb://AI-SERVICE
    predicates:
      - Path=/ai/**
```

---

#### **D. User Service (User Management)**

```
userservice/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ java/com/fitness/userservice/
â”‚           â”œâ”€â”€ UserServiceApplication.java
â”‚           â”œâ”€â”€ controller/
â”‚           â”‚   â””â”€â”€ UserController.java
â”‚           â”œâ”€â”€ service/
â”‚           â”‚   â”œâ”€â”€ UserService.java
â”‚           â”‚   â””â”€â”€ UserServiceImpl.java
â”‚           â”œâ”€â”€ repository/
â”‚           â”‚   â””â”€â”€ UserRepository.java
â”‚           â”œâ”€â”€ entity/
â”‚           â”‚   â”œâ”€â”€ User.java
â”‚           â”‚   â”œâ”€â”€ Role.java
â”‚           â”‚   â””â”€â”€ UserProfile.java
â”‚           â”œâ”€â”€ dto/
â”‚           â”‚   â”œâ”€â”€ UserDTO.java
â”‚           â”‚   â””â”€â”€ UserRegistrationDTO.java
â”‚           â””â”€â”€ exception/
â”‚               â””â”€â”€ UserNotFoundException.java
```

**Database Schema (PostgreSQL):**

```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    keycloak_id VARCHAR(255) UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE roles (
    id BIGSERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

CREATE TABLE user_roles (
    user_id BIGINT REFERENCES users(id),
    role_id BIGINT REFERENCES roles(id),
    PRIMARY KEY (user_id, role_id)
);

CREATE TABLE user_profiles (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id),
    height DECIMAL(5,2),
    weight DECIMAL(5,2),
    age INTEGER,
    fitness_goal VARCHAR(100)
);
```

**API Endpoints:**

```
GET    /users                  - Get all users
GET    /users/{id}             - Get user by ID
POST   /users                  - Create new user
PUT    /users/{id}             - Update user
DELETE /users/{id}             - Delete user
GET    /users/{id}/profile     - Get user profile
PUT    /users/{id}/profile     - Update user profile
```

---

#### **E. Activity Service (Workout Tracking)**

```
activityservice/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ java/com/fitness/activityservice/
â”‚           â”œâ”€â”€ ActivityServiceApplication.java
â”‚           â”œâ”€â”€ controller/
â”‚           â”‚   â””â”€â”€ ActivityController.java
â”‚           â”œâ”€â”€ service/
â”‚           â”‚   â”œâ”€â”€ ActivityService.java
â”‚           â”‚   â””â”€â”€ ActivityServiceImpl.java
â”‚           â”œâ”€â”€ repository/
â”‚           â”‚   â””â”€â”€ ActivityRepository.java
â”‚           â”œâ”€â”€ document/
â”‚           â”‚   â””â”€â”€ Activity.java
â”‚           â”œâ”€â”€ dto/
â”‚           â”‚   â”œâ”€â”€ ActivityDTO.java
â”‚           â”‚   â””â”€â”€ ActivityRequestDTO.java
â”‚           â”œâ”€â”€ event/
â”‚           â”‚   â”œâ”€â”€ ActivityCreatedEvent.java
â”‚           â”‚   â””â”€â”€ ActivityEventPublisher.java
â”‚           â””â”€â”€ exception/
â”‚               â””â”€â”€ ActivityNotFoundException.java
```

**MongoDB Document Structure:**

```json
{
  "_id": "ObjectId",
  "activityId": "ACT-001",
  "userId": "user-uuid",
  "activityType": "RUNNING",
  "duration": 30,
  "calories": 250,
  "intensity": "MODERATE",
  "distance": 5.0,
  "notes": "Morning run in the park",
  "createdAt": "2025-12-24T08:00:00Z",
  "updatedAt": "2025-12-24T08:00:00Z"
}
```

**Activity Types Enum:**

```java
public enum ActivityType {
    RUNNING,
    CYCLING,
    SWIMMING,
    GYMNASTICS,
    YOGA,
    WEIGHTLIFTING,
    CARDIO,
    STRETCHING
}
```

**API Endpoints:**

```
GET    /activities               - Get all activities
GET    /activities/{id}          - Get activity by ID
GET    /activities/user/{userId} - Get user's activities
POST   /activities               - Create activity
PUT    /activities/{id}          - Update activity
DELETE /activities/{id}          - Delete activity
GET    /activities/stats/{userId}- Get activity statistics
```

---

#### **F. AI Service (Recommendation Engine)**

```
aiservice/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main/
â”‚       â””â”€â”€ java/com/fitness/aiservice/
â”‚           â”œâ”€â”€ AiServiceApplication.java
â”‚           â”œâ”€â”€ controller/
â”‚           â”‚   â””â”€â”€ AIController.java
â”‚           â”œâ”€â”€ service/
â”‚           â”‚   â”œâ”€â”€ AIService.java
â”‚           â”‚   â”œâ”€â”€ GeminiService.java
â”‚           â”‚   â””â”€â”€ RecommendationService.java
â”‚           â”œâ”€â”€ repository/
â”‚           â”‚   â””â”€â”€ AIRecommendationRepository.java
â”‚           â”œâ”€â”€ document/
â”‚           â”‚   â”œâ”€â”€ AIRecommendation.java
â”‚           â”‚   â””â”€â”€ AnalysisHistory.java
â”‚           â”œâ”€â”€ dto/
â”‚           â”‚   â”œâ”€â”€ AIRequestDTO.java
â”‚           â”‚   â””â”€â”€ AIResponseDTO.java
â”‚           â”œâ”€â”€ listener/
â”‚           â”‚   â””â”€â”€ ActivityEventListener.java
â”‚           â””â”€â”€ config/
â”‚               â””â”€â”€ GeminiConfig.java
```

**AI Recommendation Document:**

```json
{
  "_id": "ObjectId",
  "activityId": "ACT-001",
  "userId": "user-uuid",
  "analysis": {
    "overallPerformance": "Good effort for a morning run",
    "improvements": [
      "Consider increasing pace gradually",
      "Focus on breathing technique"
    ],
    "suggestions": ["Try interval training", "Add stretching post-workout"],
    "safetyTips": ["Stay hydrated", "Warm up properly"]
  },
  "geminiResponse": "Full AI analysis text...",
  "confidence": 0.92,
  "generatedAt": "2025-12-24T08:05:00Z"
}
```

**RabbitMQ Event Listener:**

```java
@Component
public class ActivityEventListener {

    @RabbitListener(queues = "activity.queue")
    public void handleActivityCreated(ActivityCreatedEvent event) {
        // Process activity and generate AI recommendations
        AIRecommendation recommendation = aiService
            .generateRecommendation(event.getActivity());
        repository.save(recommendation);
    }
}
```

**API Endpoints:**

```
POST   /ai/analyze              - Analyze activity
GET    /ai/recommendations/{activityId} - Get recommendations
GET    /ai/history/{userId}     - Get analysis history
POST   /ai/feedback             - Submit feedback
```

---

## ğŸ”„ Data Flow Diagrams

### **1. User Authentication Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â‘ Login       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Keycloak   â”‚
â”‚ Frontend â”‚                    â”‚  OAuth2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                  â”‚
     â”‚  â‘¡Redirect with code             â”‚
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚  â‘¢Exchange code for token
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
     â”‚
     â”‚  â‘£Access + Refresh tokens
     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     â”‚
     â”‚  â‘¤Store tokens in localStorage
     â”‚
     â”‚  â‘¥API calls with Bearer token
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â‘¦Forward      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   User      â”‚
â”‚ Gateway  â”‚                    â”‚  Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **2. Activity Creation Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â‘ Submit Form    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Redux     â”‚
â”‚Component â”‚                   â”‚   Store     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘¡Dispatch Action
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚  API.js     â”‚
                               â”‚  (Axios)    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘¢POST /activities
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚    API      â”‚
                               â”‚  Gateway    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘£Route to Service
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚  Activity   â”‚
                               â”‚  Service    â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
                    â†“                 â†“                 â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   MongoDB   â”‚   â”‚  RabbitMQ   â”‚  â”‚   Response  â”‚
            â”‚   (Save)    â”‚   â”‚  (Publish)  â”‚  â”‚  to Client  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘¤Event: ActivityCreated
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚ AI Service  â”‚
                               â”‚  (Listen)   â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘¥Generate Analysis
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   Gemini    â”‚
                               â”‚    API      â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â”‚ â‘¦Save Recommendation
                                      â†“
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   MongoDB   â”‚
                               â”‚ (AI Data)   â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **3. Service Discovery Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â‘ Register      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Service   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Eureka    â”‚
â”‚  Instance   â”‚                     â”‚   Server    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
       â‘¡Heartbeat (every 30s)              â”‚
       â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚ â‘¢Service Registry
                                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â‘£Request Info   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    API      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Eureka    â”‚
â”‚  Gateway    â”‚                     â”‚   Server    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚  â‘¤Service Locations               â”‚
       â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚  â‘¥Load Balance & Route
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Target    â”‚
â”‚  Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

### **Authentication & Authorization**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Layer 1: OAuth2 PKCE Flow                                 â”‚
â”‚  â”œâ”€ Code Challenge Generation                              â”‚
â”‚  â”œâ”€ Authorization Code Exchange                            â”‚
â”‚  â””â”€ JWT Token Validation                                   â”‚
â”‚                                                              â”‚
â”‚  Layer 2: API Gateway Security                             â”‚
â”‚  â”œâ”€ JWT Token Verification                                 â”‚
â”‚  â”œâ”€ CORS Configuration                                     â”‚
â”‚  â””â”€ Rate Limiting                                          â”‚
â”‚                                                              â”‚
â”‚  Layer 3: Service-Level Security                           â”‚
â”‚  â”œâ”€ Method Security (@PreAuthorize)                        â”‚
â”‚  â”œâ”€ Data Validation                                        â”‚
â”‚  â””â”€ SQL Injection Prevention                               â”‚
â”‚                                                              â”‚
â”‚  Layer 4: Data Protection                                  â”‚
â”‚  â”œâ”€ Encrypted Communication (HTTPS)                        â”‚
â”‚  â”œâ”€ Sensitive Data Encryption                              â”‚
â”‚  â””â”€ Database Access Control                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**JWT Token Structure:**

```json
{
  "header": {
    "alg": "RS256",
    "typ": "JWT",
    "kid": "key-id"
  },
  "payload": {
    "sub": "user-uuid",
    "preferred_username": "john_doe",
    "email": "john@example.com",
    "realm_access": {
      "roles": ["user", "premium"]
    },
    "exp": 1735041600,
    "iat": 1735038000
  }
}
```

---

## ğŸ“Š Scalability & Performance Architecture

### **Horizontal Scaling Strategy**

```
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Load Balancer  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚                 â”‚
                â†“                 â†“                 â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Gateway   â”‚    â”‚  Gateway   â”‚   â”‚  Gateway   â”‚
         â”‚Instance #1 â”‚    â”‚Instance #2 â”‚   â”‚Instance #3 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                 â”‚                 â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚                 â”‚
                â†“                 â†“                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ User Service #1  â”‚ â”‚Activity Service#1â”‚ â”‚ AI Service #1    â”‚
    â”‚ User Service #2  â”‚ â”‚Activity Service#2â”‚ â”‚ AI Service #2    â”‚
    â”‚ User Service #3  â”‚ â”‚Activity Service#3â”‚ â”‚ AI Service #3    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Caching Strategy**

```
Request Flow with Caching:

User Request
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Cache Hit?   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gateway â”‚â”€â”€â”€â”€â”€â”€â”€Yesâ”€â”€â”€â”€â”€â”€â†’â”‚ Return  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  Cache  â”‚
     â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ No (Cache Miss)
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Store     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Cache  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
Return Response
```

**Cache Layers:**

- **Browser Cache**: Static assets, API responses (short TTL)
- **API Gateway Cache**: Common endpoints, user profiles
- **Service Cache**: Database query results, computations
- **Database Cache**: Query cache, connection pool

---

## ğŸ”§ DevOps & Deployment Architecture

### **Containerization with Docker**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Docker Compose Setup                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   PostgreSQL  â”‚  â”‚    MongoDB    â”‚  â”‚   RabbitMQ    â”‚   â”‚
â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚   â”‚
â”‚  â”‚  (Port: 5432) â”‚  â”‚ (Port: 27017) â”‚  â”‚ (Port: 5672)  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Keycloak    â”‚  â”‚    Eureka     â”‚  â”‚Config Server  â”‚   â”‚
â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚   â”‚
â”‚  â”‚  (Port: 8181) â”‚  â”‚  (Port: 8761) â”‚  â”‚  (Port: 8888) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Gateway     â”‚  â”‚ User Service  â”‚  â”‚Activity Svc   â”‚   â”‚
â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚   â”‚
â”‚  â”‚  (Port: 8080) â”‚  â”‚  (Port: 8081) â”‚  â”‚  (Port: 8082) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  AI Service   â”‚  â”‚React Frontend â”‚                       â”‚
â”‚  â”‚   Container   â”‚  â”‚   Container   â”‚                       â”‚
â”‚  â”‚  (Port: 8083) â”‚  â”‚  (Port: 5173) â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Docker Network:**

```yaml
networks:
  fitness-network:
    driver: bridge

volumes:
  postgres-data:
  mongodb-data:
  rabbitmq-data:
```

---

## ğŸ“ˆ Monitoring & Observability

### **Logging Architecture**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Distributed Logging System                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  Services (Log Generation)                                â”‚
â”‚  â”œâ”€ User Service    â†’ logs/user-service.log              â”‚
â”‚  â”œâ”€ Activity Service â†’ logs/activity-service.log         â”‚
â”‚  â””â”€ AI Service       â†’ logs/ai-service.log               â”‚
â”‚                                                            â”‚
â”‚  â†“ (Forward to)                                           â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚         Centralized Log Aggregator       â”‚            â”‚
â”‚  â”‚         (ELK Stack / Splunk)             â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                            â”‚
â”‚  â†“ (Visualize in)                                         â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚           Monitoring Dashboard           â”‚            â”‚
â”‚  â”‚         (Grafana / Kibana)               â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Metrics to Monitor:**

- Service health status
- Request/Response times
- Error rates
- Database connection pool
- Message queue depth
- CPU/Memory utilization
- Network latency

---

## ğŸš€ CI/CD Pipeline Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CI/CD Pipeline                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Developer Push
         â†“
2. GitHub Actions / Jenkins Trigger
         â”‚
         â”œâ”€â†’ Build Phase
         â”‚   â”œâ”€ Maven Clean Install
         â”‚   â”œâ”€ NPM Build (Frontend)
         â”‚   â””â”€ Run Unit Tests
         â”‚
         â”œâ”€â†’ Test Phase
         â”‚   â”œâ”€ Integration Tests
         â”‚   â”œâ”€ API Tests (Postman/Newman)
         â”‚   â””â”€ Code Coverage Report
         â”‚
         â”œâ”€â†’ Quality Check
         â”‚   â”œâ”€ SonarQube Analysis
         â”‚   â”œâ”€ Security Scan
         â”‚   â””â”€ Dependency Check
         â”‚
         â”œâ”€â†’ Build Docker Images
         â”‚   â”œâ”€ docker build -t user-service
         â”‚   â”œâ”€ docker build -t activity-service
         â”‚   â”œâ”€ docker build -t ai-service
         â”‚   â””â”€ docker build -t frontend
         â”‚
         â”œâ”€â†’ Push to Registry
         â”‚   â””â”€ Docker Hub / AWS ECR
         â”‚
         â””â”€â†’ Deploy
             â”œâ”€ Development Environment
             â”œâ”€ Staging Environment
             â””â”€ Production (Manual Approval)
```

---

## ğŸ“‹ Technology Stack Summary

| Layer                       | Technology           | Version  | Purpose              |
| --------------------------- | -------------------- | -------- | -------------------- |
| **Backend**                 | Java                 | 21       | Programming language |
|                             | Spring Boot          | 3.5.8    | Framework            |
|                             | Spring Cloud         | 2025.0.0 | Microservices        |
|                             | Maven                | 3.9+     | Build tool           |
| **Frontend**                | React                | 19.2.0   | UI library           |
|                             | Vite                 | 7.2.4    | Build tool           |
|                             | Material-UI          | 7.3.6    | UI components        |
|                             | Redux Toolkit        | 2.11.1   | State management     |
| **Databases**               | PostgreSQL           | 15+      | Relational DB        |
|                             | MongoDB              | 6.0+     | Document DB          |
| **Message Queue**           | RabbitMQ             | 3.12+    | Event messaging      |
| **Service Discovery**       | Eureka               | 4.1.0    | Service registry     |
| **API Gateway**             | Spring Cloud Gateway | 4.1.0    | Routing              |
| **Auth**                    | Keycloak             | 23+      | OAuth2 server        |
| **AI**                      | Google Gemini        | 2.0      | AI analysis          |
| **Containerization**        | Docker               | 24+      | Containers           |
| **Container Orchestration** | Docker Compose       | 2.20+    | Multi-container      |

---

## ğŸ¯ Architecture Principles Applied

### **1. Microservices Patterns**

- âœ… Service per bounded context
- âœ… Database per service
- âœ… API Gateway pattern
- âœ… Service discovery pattern
- âœ… Event-driven architecture
- âœ… Circuit breaker (future)
- âœ… Saga pattern (future)

### **2. Design Principles**

- âœ… SOLID principles
- âœ… Separation of concerns
- âœ… DRY (Don't Repeat Yourself)
- âœ… Single Responsibility
- âœ… Dependency Injection
- âœ… Interface segregation

### **3. Cloud-Native Patterns**

- âœ… 12-Factor App methodology
- âœ… Stateless services
- âœ… Configuration externalization
- âœ… Health check endpoints
- âœ… Graceful shutdown
- âœ… Containerization ready

---

## ğŸ”® Future Architecture Enhancements

### **Phase 1: Resilience**

- [ ] Implement Circuit Breaker (Resilience4j)
- [ ] Add Retry mechanism
- [ ] Implement Rate Limiting
- [ ] Add Bulkhead pattern

### **Phase 2: Observability**

- [ ] Add Distributed Tracing (Zipkin/Jaeger)
- [ ] Implement Metrics (Prometheus)
- [ ] Add Health Dashboards (Grafana)
- [ ] Centralized Logging (ELK Stack)

### **Phase 3: Advanced Features**

- [ ] GraphQL Gateway
- [ ] gRPC for inter-service communication
- [ ] Redis caching layer
- [ ] Kafka for high-throughput events

### **Phase 4: Cloud Deployment**

- [ ] Kubernetes orchestration
- [ ] AWS/Azure cloud deployment
- [ ] Auto-scaling configuration
- [ ] CDN integration for frontend

---

## ğŸ“ Architecture Decision Records (ADR)

### **ADR-001: Microservices over Monolith**

**Decision:** Use microservices architecture
**Reasoning:**

- Independent deployment
- Technology flexibility
- Better scalability
- Team autonomy

### **ADR-002: OAuth2 PKCE for Authentication**

**Decision:** Use OAuth2 with PKCE flow
**Reasoning:**

- Most secure for SPAs
- No client secret exposure
- Industry standard
- Keycloak support

### **ADR-003: MongoDB for Activity Data**

**Decision:** Use MongoDB for activity and AI services
**Reasoning:**

- Flexible schema for varied activity types
- Better for document-based data
- Horizontal scaling capability
- JSON-native storage

### **ADR-004: RabbitMQ for Event Messaging**

**Decision:** Use RabbitMQ over Kafka
**Reasoning:**

- Simpler setup
- Adequate for current scale
- Better for request/reply patterns
- Lower resource requirements

---

This architecture is designed for scalability, maintainability, and production readiness. Each component is independently deployable and can scale horizontally as needed. ğŸš€
